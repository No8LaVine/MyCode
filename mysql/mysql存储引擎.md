### MySQL

默认引擎 5.5之前 `MyIsAm` 

5.5后 `InnoDB`

#### MyIyAm和InnoDB的区别

### 1.是否支持事务和崩溃后的安全恢复：

​	`MyISAM`： 强调的是性能，每次查询具有原子性,其执行速度比快 `InnoDB` 更快，但不支持事务
​	`InnoDB`： 支持事务，具有事务、回滚和崩溃修复能力

#### 2.锁：

​	`MyIyAm`：只支持表锁，`crud`都会给表自动加锁，读取时加共享锁，写入时加排他锁，如果加锁以后的表满足 `insert` 并发的情况下，可以在表的尾部插入新的数据。
​	`InnoDB`：支持行锁，但是`InnoDB`的行锁，只是在`WHERE`的主键是有效的，非主键的`WHERE`都会锁全表的。

#### 3.外键

​	`MyISAM`：不支持
​	`InnoDB`：支持

#### 4.存储结构

`MyISAM`：每个`MyISAM`在磁盘上存储成三个文件。第一个文件的名字以表的名字开始，扩展名指出文件类型。`.frm`文件存储表定义。数据文件的扩展名为`.MYD (MYData)`。索引文件的扩展名是`.MYI (MYIndex)`。

`InnoDB`：所有的表都保存在同一个数据文件中（也可能是多个文件，或者是独立的表空间文件），`InnoDB`表的大小只受限于操作系统文件的大小，一般为2GB。

#### 4.存储空间

`MyISAM`：可被压缩，存储空间较小。支持三种不同的存储格式：静态表(默认，但是注意数据末尾不能有空格，会被去掉)、动态表、压缩表。

`InnoDB`：需要更多的内存和存储，它会在主内存中建立其专用的缓冲池用于高速缓冲数据和索引。

5. #### 可移植性、备份及恢复
	
	`MyISAM`：数据是以文件的形式存储，所以在跨平台的数据转移中会很方便。在备份和恢复时可单独针对某个表进行操作。
	
	`InnoDB`：免费的方案可以是拷贝数据文件、备份 `binlog`，或者用 `mysqldump`，在数据量达到几十G的时候就相对痛苦了。
#### 存储引擎选择的基本原则

##### 采用MyISAM引擎

	R/W > 100:1 且update相对较少
	并发不高
	表数据量小
	硬件资源有限
	插入数据快，空间和内存使用比较低。如果表主要是用于插入新记录和读出记录，那么选择MyISAM能实现处理高效率。
	如果应用的完整性、并发性要求比 较低，也可以使用。
	如果数据表主要用来插入和查询记录，则MyISAM引擎能提供较高的处理效率

##### 采用InnoDB引擎

	R/W比较小，频繁更新大字段
	表数据量超过1000万，并发高
	安全性和可用性要求高